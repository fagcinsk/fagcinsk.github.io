---
layout: post
categories: frontend
title: Оптимизация изображений для Веба при помощи ImageMagick
description: >
  Способы оптимизации изображений при помощи утилиты convert библиотеки ImageMagick
image: photos/imagemagick-convert-optimization.png
---

Часто при работе с изображениями встаёт задача оптимизировать изображения для показа в Веб. Инструментов достаточно много, в том числе и онлайн, однако больше контроля над процессом и более эффективный результат можно получить используя утилиту convert из библиотеки ImageMagick.

Часто нужно сделать так, чтобы изображения подгружались в полном размере, чтобы не плыла вёрстка или не было пустого пространства до полной загрузки изображения. Да и к тому же будет достигнут эффект размытия при загрузке изображения.

Реализовать это очень просто:

``` shell
convert -strip -interlace Plane -quality 85 input-file.jpg output-file.jpg 
```

Подробнее про опции:

`-strip` убирает лишнюю метаинформацию  
`-quality` устанаввливает качество результата в процентах; рекомендуется в диапазоне 75..90  
`-interlace Plane` определяет режим подгрузки изображения, в данном случае всё изображение при загрузке в браузере будет отображаться постепенно из размытого состояния к более чёткому.

При работе с PNG изображениями можно достичь меньшего размера, если урезать палитру до минимально необходимого набора цветов:

``` shell
convert -colors 8 input-file.jpg output-file.jpg 
```

Где:

`-colors 8` указывает на количество цветов в выходном файле.
