---
layout: post
categories: frontend
title: Переход с PHPStorm или Intellij IDEA на VIM
description: Опыт перехода фронтенд веб-разработчика на модальный редактор VIM с IDE от Intellij. Почему, зачем и как.
image: photos/perehod-s-phpstorm-ili-idea-na-vim.png
---

Может кому-то показаться странным, зачем переходить с полноценной IDE с кучей возможностей
на редактор, из которого даже выйти сложно. А в PHPStorm или IDEA одной мышью
программировать можно. В моём случае переход был инициирован двумя вещами:
желание использовать инструмент матёрых программистов и желание хоть как-то
продолжать работать =D

## Начало освоения VIM

Первые два года изучения VIM прошли безуспешно. Каждый год по месяцу уделял
время на изучение возможностей, но как-то не срослось. То ли функционал казался
скудным, то ли всё время уходило на изучение принципов работы в редакторе.

Сначала не понимал, зачем нужны эти режимы, если можно находясь только в одном
режиме работать с текстом как в обычном редакторе. Пиши и пиши, даже мышь вроде
работала для перемещения курсора =)

На третий год решил взяться изо всех сил изучить возможности VIM и создать свой
vimrc файл, настроить под себя. Как говорится, первый блин комом. Ну поставил
кучу плагинов, понадобавлял всяких полезностей собрав их с разных источников.
Потом сел за редактор на следующий день и понял что ничего не помню. И снова
бросил это дело.

## Вынужденный переход на VIM с IDEA

IDE от Intellij очень хороша по своему функционалу. Из используемого мной это:

- поддержка тонны разнообразных плагинов от разработчиков и от сообщества
- гибкость настроек
- магия рефакторинга: сменив имя поля в таблице происходит автоматическое переименование использования этого поля по всему коду
- очень удобная работа с базами данных
- умное быстрое автодополнение
- поддержка разделения экрана для работы с несколькими файлами одновременно
- хранение истории правок
и многое многое другое.

Однако однажды [перейдя на удалённую работу](/blog/linux/rabotaem-udalyonno-po-ssh-na-karantine),
работая с ноутбука и имея 4 гигабайта оперативки понял, что работа встаёт колом.
Оперативка съедалась вся при запущенном браузере (45%) и загруженной IDEA.
При этом по окончании рабочего дня своп использовался на 25%, это при условии,
что был включён zRam. Так продолжать работать было невозможно. И тут я решил
провести эксперимент и перейти на VIM полностью.

До очередной попытки чаще всего использовал VIM для правок конфигов на серверах.

Начал всё с чистого листа: создал новый vimrc файл и помаленьку стал добавлять
в него нужное для работы.

Первое и необходимое для работы это плагины. С ними проще и быстрее получить
нужный функционал. Сразу вспомнил, удобно когда менеджер плагинов сам
устанавливается при старте VIM. Для этого у меня уже был кусок конфига.

```vim
if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
        \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall | source $MYVIMRC
endif
```

Если менеджер плагинов не установлен при запуске редактора, он скачивается
и запускается установка плагинов, указанных в директивах:

```vim
call plug#begin('~/.vim/plugged')

" здесь плагины

call plug#end()
```

Далее пошёл по просторам интернетов искать плагины, которые были нужны
при работе в IDE IDEA (ну или PHPStorm).

__Подсветка синтаксиса__ есть отдельно для каждого языка, но есть один мультиязыковый
плагин &mdash; `sheerun/vim-polyglot`, объединяющий разные языки.

Для __автодополнения__ решил использовать `neoclide/coc.nvim`, т.к. он позволяет
получить результат как в VSCode.

Для вставки __сниппетов__ пользуюсь тем же `coc` (ссылка на конфиг будет в конце поста),
плюс `honza/vim-snippets` &mdash; набор готовых сниппетов, можно создавать и свои.

Чтобы быстро __переходить по файлам__ с помощью fuzzy (нечёткого) поиска воспользовался:

```vim
Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
Plug 'junegunn/fzf.vim'
```
оба плагина нужны.

Для __навигации по файлам__ использую `preservim/nerdtree`, как самый популярный.
Конфигурируется отображение иконок типов файлов, добавляются плагином
`ryanoasis/vim-devicons`, так что красоту навести можно.

Т.к. работаю с html разметкой, удобно написать __emmet__ строку `ul>li*5` и получить список. Это
делает `mattn/emmet-vim`.

Для работы с __базами данных__ есть классный плагин от tpope: `tpope/vim-dadbod`.
Указываете в переменной `g:db` строку соединения с базой и спокойно отправляете
запросы на исполнение командой `DB`. По умолчанию отправляется весь буфер.

Для __рефакторинга__ можно использовать разные техники, но касаемо PHP решением
стал `adoy/vim-php-refactoring-toolbox`. Умеет создавать методы из кусков кода,
переименовывать методы, переменные и многое другое.

## Итоги перехода с IDEA на VIM

Поработав около месяца-двух в редакторе VIM сомневаюсь что что-то заставит меня
сменить его на что-то иное. Теперь работать можно непосредственно на удалённой
машине по SSH. Кстати, поделился опытом [ускорения работы VIM по SSH](/blog/linux/optimizaciya-i-uskorenie-vim).

Кому интересно облегчение VIM,
[сделал статусную строку без плагинов в 5 строк](/blog/linux/statusnaya-stroka-vim-bez-plaginov).

Теперь как говорится, работать могу даже с хлебушка/холодильника/калькулятора. =)

На данный момент неудобно только редактировать множество строк в БД. Для этого
пользуюсь mysql-workbench.

Как и обещал,
[конфиг vimrc](https://github.com/fagcinsk/dotfiles/blob/976c6fbcbeda91382b169d329e3f3a09449f9669/vim/.vimrc)
на момент написания поста.

Желаю удачи в переходе на редактор VIM!

